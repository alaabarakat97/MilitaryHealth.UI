<div class="user-header-section px-1 pt-1 container-fluid">
  <div class="mb-3 d-flex justify-content-end">
      <div class="search-wrapper">
          <input type="text" class="search-input" placeholder="ابحث عن رقم الملف أو الاسم"
              (input)="onFilterChange($event)" />
          <i class="fas fa-search search-icon"></i>
      </div>
  </div>



  <p-table #table [value]="exams" [rows]="pageSize" [totalRecords]="totalRecords" [rows]="10" [sortMode]="'multiple'"
    [showCurrentPageReport]="true" [lazy]="true" [sortMode]="'multiple'" class="custom-table">

    <ng-template pTemplate="header">
      <tr>
        <th>رقم ملف المنتسب</th>
        <th>القدرة البصرية</th>
        <th>اختبار الألوان</th>
        <th>أسواء الانكسار</th>
        <th>نسبة الانكسار</th>
        <th>الأمراض الأخرى</th>
        <th>السبب</th>
        <th>النتيجة</th>
        <th>إجراءات</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-exam>
      <tr>
        <td>{{ exam.applicantFileNumber }}</td>
        <td>{{ exam.vision }}</td>
        <td>{{ exam.colorTest }}</td>
        <td>{{ exam.refractionType?.description }}</td>
        <td>{{ exam.refractionValue }}</td>
        <td>{{ exam.otherDiseases || '-' }}</td>
        <td>{{ exam.reason || '-' }}</td>
        <td>
          <span [ngClass]="getBadgeClass(exam.result)">
            {{ exam.result?.description }}
          </span>
        </td>
        <td>
          <button title="تعديل" class="btn btn-sm btn-primary" (click)="openEditExam(exam)">
            <i class="fas fa-edit"></i>
          </button>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="9" class="text-center">لا توجد فحوص مؤجلة.</td>
      </tr>
    </ng-template>

  </p-table>

  <!-- <app-edit-eye-exam *ngIf="selectedExam" [exam]="selectedExam" (dialogClosed)="onDialogClose($event)">
  </app-edit-eye-exam> -->

  <app-paginator [totalRecords]="totalRecords" [pageSize]="rowsPerPage" [currentPage]="page"
  (pageChange)="onPageChange($event)" (pageSizeChange)="onPageSizeChange($event)">
</app-paginator>
</div>
